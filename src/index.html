<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Neighborhood</title>
<!-- PROD START
  <link rel="stylesheet" href="css/style.min.css">
 PROD END -->
<!-- DEV START -->
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="css/style.css">
<!-- DEV END -->
</head>
<body>
  <nav class="sidebar">
    <div class="sidebar-hamburger">
      <button class="btn btn-default sidebar-button">
        <span class="glyphicon glyphicon-menu-hamburger"></span>
      </button>
    </div>
    <div id="locations"> <!-- Locations START -->
      <div class="form-group">
        <div class="btn-group filter-group">
          <button type="button" class="btn btn-default filter-button" data-bind="click: toggleFilterMode">Filters</button>
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-bind="click: toggleFilterMode">
            <span class="caret"></span>
            <span class="sr-only">Toggle Dropdown</span>
          </button>
          <ul class="dropdown-menu list-group filter-list" data-bind="foreach: typeList, css:{'hidden': !filterMode()}">
            <li class="list-group-item filter-item p-cursor">
              <label class="filter-item-label list-group-label float-left" data-bind="attr: {for: elem}, text: text"></label>
              <input class="float-right" type="checkbox" data-bind="attr: {name: elem, id: elem}, value: text, checked: $parent.selectedTypes, click: $parent.search">
              <div class="fake-checkbox" data-bind="click: $parent.clickCheckbox">
              </div>
            </li>
          </ul>
        </div>
      </div>
      <div class="form-group">
        <input type="text" id="search" class="filtertext form-control" data-bind="textInput: searchText, event: {'keyup': search}" placeholder="Neighborhood Search">
      </div>
      <div class="List form-group">
        <h3>My Places
          <button class="btn btn-primary float-right" data-bind="css: {'active': editMode}, click: toggleEditMode">
            <span class="text-right glyphicon glyphicon-edit" aria-hidden="true"></span>
          </button>
        </h3>
        <ul class="list-group location-list" data-bind="foreach: locationList">
          <li class="list-group-item p-cursor" data-bind="event: {click: $parent.selectLocation, mouseover: $parent.isGoogleMapsLoaded ? $parent.showMarkerTitle : null, mouseout: $parent.isGoogleMapsLoaded ? $parent.hideMarkerTitle : null}, css: {'active': $data === $parent.currentLocation() }">
            <div class="list-group-label location-name float-left">
              <span data-bind="text: name"></span>
            </div>
            <div class="location-edit float-right" data-bind="css: {'hidden': !$parent.editMode()}">
              <button class="btn btn-danger btn-xs" data-bind="click: $parent.removeLocation">
                <span class="text-right glyphicon glyphicon-remove" aria-hidden="true"></span>
              </button>
            </div>
          </li>
        </ul>
      </div>
      <div id="info-window" class="panel panel-default form-group info-window hidden" data-bind="with: currentLocation(), css: {'hidden': !currentLocation()}">
        <div class="panel-heading info-window-header">
          <button id="info-window-close" type="button" class="close float-right" aria-label="Close" data-bind="click: $parent.emptyCurrentLocation">
            <span aria-hidden="true">&times;</span>
          </button>
          <h3 class="panel-title" data-bind="text: name">Name</h3>
          <h4  class="panel-title location-type" data-bind="text: getTypes">Type</h4>
        </div>
        <div class="panel-body">
          <div class="location-address">
            <p class="location-address" data-bind="text: formatted_address">
            </p>
          </div>
          <div class="location-info-third" data-bind="foreach: getApiObjects()">
            <div class="location-api-short">
              <h4><a target="_blank" data-bind="attr: {href: pageURL}, text: api">Api</a>
                <button class="btn btn-primary modal-button float-right" data-bind="click: $root.openApiMode" data-toggle="modal" data-target="#apiModal">
                  <span class="text-right glyphicon glyphicon-modal-window" aria-hidden="true"></span>
                </button>
              </h4>
              <div>
                <p class="location-api-short-text" data-bind="text: text"></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div> <!-- Locations END -->
  </nav>
  <main>
    <div id="map" class="map">
    </div>
    <div class="hidden">
      <div id="pac-div" class="input-group google-search">
        <input id="pac-input" class="controls form-control" type="text" placeholder="Google Places Search">
        <span class="input-group-btn">
          <button id="clear-pac" class="btn btn-default" type="button">X</button>
        </span>
      </div>
    </div>
    <div id="messages" class="messages hidden" data-bind="css: {'hidden': messageList().length === 0}">
      <div class="message-list">
        <button class="btn btn-primary message-dismissall" data-bind="click: dismissAllMessages">Dismiss All Messages</button>
      </div>
      <div class="message-list" data-bind="foreach: messageList">
        <div class="alert" data-bind="css: kind">
          <span data-bind="text: text"></span>
          <a href="#" class="close" data-dismiss="alert" aria-label="close" data-bind="click: $parent.dismissMessage">&times;</a>
        </div>
      </div>
    </div>
    <div id="options" class="options">
      <div class="options-button-div">
        <button class="btn btn-default float-right options-button" data-bind="click: toggleOptionsMode">
          <span class="glyphicon glyphicon-option-vertical"></span>
        </button>
      </div>
      <div class="panel panel-default form-group options-panel" data-bind="css: {'hidden': !optionsMode()}">
        <div class="panel-heading options-panel-heading">
          <h4 class="panel-title options-header">Options</h4>
        </div>
        <div class="panel-body options-panel-body">
          <label class="list-group-item">Center Map On: </label>
          <ul class="list-group option-list" data-bind="foreach: centerOnList">
            <li class="list-group-item option-item p-cursor">
              <label class="option-item-label float-left" data-bind="attr: {for: 'center_on_' + $data}, text: $data" >Select</label>
              <input class="float-right" type="checkbox" data-bind="attr: {name: 'center_on_' + $data, id: 'center_on_' + $data}, value: $data, checked: $parent.centerOn">
              <div class="fake-checkbox" data-bind="click: $parent.clickCheckbox">
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </main>
  <!-- Modal -->
  <div class="modal fade" id="apiModal" tabindex="-1" role="dialog" aria-labelledby="apiModalLabel" data-bind="with: currentLocation(), css: {'hidden': !currentLocation()}">
    <div class="modal-dialog" role="document" data-bind="with: currentApiObject()">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close" data-bind="click: $root.closeApiMode">
            <span aria-hidden="true">&times;</span>
          </button>
          <a target="_blank" data-bind="attr: {href: pageURL}">
            <h4 class="modal-title" id="apiModalLabel">
              <span data-bind="text: api">Api</span>
              <span data-bind="text: $parent.name()">Name</span>
            </h4>
          </a>
        </div>
        <div class="modal-body">
          <div class="detail-text-container">
            <span data-bind="text: description"></span>
          </div>
          <div class="images-alt-container" data-bind="css:{'hidden': currentImage().url()}">
            <p class="images-alt" data-bind="text: imagesAlt"></p>
          </div>
          <div class="image-container" data-bind="css:{'hidden': !currentImage().url()}">
            <div class="pre-image-div image-button-div image-divs">
              <div class="image-button-place-holder">
              </div>
              <button class="pre-image image-button btn btn-primary" data-bind="click: $root.changeImage">
                <span class="image-button-icon p-cursor glyphicon glyphicon-chevron-left" ></span>
              </button>
            </div>
            <div class="image-div image-divs" data-bind="with: currentImage()">
              <img class="image" data-bind="attr: {src: url(), alt: $parents[1].name()}" src="images/san-francisco.jpg" alt="San Francisco">
              <div class="image-info">
                <a target="_blank" class="text-left float-left" data-bind="attr: {href: descriptionurl()}">
                  <span>Thanks to <strong  data-bind="text: user"></strong></span>
                </a>
                <span  class="text-right float-right" data-bind="text: localDateString"></span>
              </div>
            </div>
            <div class="next-image-div image-button-div image-divs">
              <div class="image-button-place-holder btn btn-primary">
              </div>
              <button class="next-image image-button btn btn-primary" data-bind="click: $root.changeImage">
                <span class="image-button-icon p-cursor glyphicon glyphicon-chevron-right"></span>
              </button>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal" data-bind="click: $root.closeApiMode">Close</button>
        </div>
      </div>
    </div>
  </div>
<script src="js/lib/jquery-1.12.4.min.js"></script>
<script src="js/lib/knockout-3.2.0.min.js"></script>
<script src="js/lib/bootstrap.min.js"></script>
<!-- PROD START
<script src="js/main.min.js"></script>
 PROD END -->
<!-- DEV START -->
<script src="js/init.js"></script>
<script src="js/model.js"></script>
<script src="js/viewmodels/location.js"></script>
<script src="js/viewmodels/message.js"></script>
<script src="js/app.js"></script>
<script src="js/map.js"></script>
<script src="js/api.js"></script>
<!-- DEV END -->
<script src="http://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyBCmSMFCDMw4lXHO7ntQACiwkdr2YRmB28"></script>
</body>
</html>

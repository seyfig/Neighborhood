/*! neighborhood - v0.1.0 - 2016-09-08 */var app=app||{};!function(){"use strict";var a=function(a){var b;for(var c in a){b=a[c];break}return b},b=function(){var b=this;this.apiList=["Wikipedia","Foursquare"],this.apis={},this.apiRequest=function(a,c){var d=c.api;b.apis[d].request[a]&&b.apis[d].request[a](c)},this.apiResponseData=function(a){app.lvm.apiResponseData(a)},this.apiResponseFail=function(a){app.lvm.apiResponseFail(a)},this.apiResponseNoInfo=function(a){app.lvm.apiResponseNoInfo(a)},this.apiResponseDetail=function(a){app.lvm.apiResponseDetail(a)},this.apiResponseImages=function(a){app.lvm.apiResponseImages(a)},this.apiResponseDetailFail=function(a){app.lvm.apiResponseDetailFail(a)},this.apiResponseImagesFail=function(a){app.lvm.apiResponseImagesFail(a)};var c=function(){var c=this;this.api="Wikipedia",this.request={},this.ajax=function(a,b,c){a||console.log("Invalid URL");var d=setTimeout(c,8e3);$.ajax({type:"GET",url:a,dataType:"jsonp"}).done(function(a){clearTimeout(d),b(a)}).fail(c)},this.request.search=function(a){if(!a.query||void 0===a.locationId)return void console.log("invalid request");var d=encodeURIComponent(a.query).replace(/%20/g,"+"),e=a.locationId,f="http://en.wikipedia.org/w/api.php?action=opensearch&search="+d+"&format=json&callback=wikiCallback&redirects=resolve&prop=extracts&exintro=&explaintext=&rvprop=content",g=function(){b.apiResponseFail(a)},h=function(d){if(d[1][0]){var f={api:c.api,locationId:e,title:d[1][0],text:d[2][0],pageURL:d[3][0]};b.apiResponseData(f)}else b.apiResponseNoInfo(a)};c.ajax(f,h,g)},this.request.query=function(d){var e=d.locationId,f=encodeURIComponent(d.query).replace(/%20/g,"+"),g="https://en.wikipedia.org/w/api.php?format=json&action=query&redirects=resolve&prop=extracts&exintro=&explaintext=&titles="+f,h=function(){b.apiResponseDetailFail(d),b.apiResponseImagesFail(d)},i=function(f){var g=f.query.pages,h=a(g),i={api:c.api,locationId:e,description:h.extract,pageId:h.pageid};b.apiResponseDetail(i),d.query=h.pageid,c.request.images(d)};c.ajax(g,i,h)},this.request.images=function(a){var d=encodeURIComponent(a.query),e="https://en.wikipedia.org/w/api.php?action=query&pageids="+d+"&generator=images&prop=imageinfo&iiprop=url|dimensions|mime|user|timestamp&format=json&iiurlwidth=800",f=function(){b.apiResponseImagesFail(a)},g=function(d){var e=d.query.pages,f=[];for(var g in e){var h=e[g];if(!h.pageid){var i=h.imageinfo[0],j={url:i.url,thumburl:i.thumburl,descriptionurl:i.descriptionurl,user:i.user,timestamp:i.timestamp};f.push(j)}}var k={api:c.api,locationId:a.locationId,images:f};b.apiResponseImages(k)};c.ajax(e,g,f)}},d=function(a){var c=this;this.api="Foursquare",this.request={},this.ajax=function(a,b,c){var d="RKFO2JAPI2Q0TOWDDMZJ3C2R2G3PCPIZ0MAOBDNKECSKRNBD",e="EEUKXUDZQ23RTUARN3CRVFA4AXBSJTDNA3BU5UK0OXGNVIUW";a+="client_id="+d+"&client_secret="+e+"&v=20130815",$.ajax({type:"GET",url:a}).done(b).fail(c)},this.request.search=function(a){var d=a.location,e=encodeURIComponent(a.query),f=a.locationId,g=d.lat.toString()+","+d.lng.toString(),h="https://api.foursquare.com/v2/venues/search?ll="+g+"&limit=10&query="+e+"&",i=function(d){var e=d.response.venues;if(e.length>0){var g=d.response.venues[0],h={api:c.api,locationId:f,pageId:g.id,text:g.name};b.apiResponseData(h)}else b.apiResponseNoInfo(a)},j=function(){b.apiResponseFail(a)};c.ajax(h,i,j)},this.request.query=function(a){var d=encodeURIComponent(a.query),e="https://api.foursquare.com/v2/venues/"+d+"?",f=function(d){for(var e=d.response.venue,f=e.photos.groups[0].items,g=0;g<f.length;g++)f[g].descriptionurl=e.canonicalUrl+"?openPhotoId="+f[g].id;var h=e.description?e.description:e.name,i={api:c.api,locationId:a.locationId,pageURL:e.canonicalUrl,description:h,rating:e.rating,shortURL:e.shortUrl},j={api:c.api,locationId:a.locationId,images:f};b.apiResponseDetail(i),b.apiResponseImages(j)},g=function(){b.apiResponseDetailFail(a),b.apiResponseImagesFail(a)};c.ajax(e,f,g)}};this.apis.Wikipedia=new c,this.apis.Foursquare=new d};app.api=new b}();var app=app||{};!function(){"use strict";app.bindMessagesVM=function(){void 0!==typeof ko&&(ko.applyBindings(app.mvm,document.getElementById("messages")),delete app.bindMessagesVM)},app.bindLocationsVM=function(){void 0!==typeof ko&&(ko.applyBindings(app.lvm,document.getElementById("locations")),ko.applyBindings(app.lvm,document.getElementById("apiModal")),ko.applyBindings(app.lvm,document.getElementById("options")),delete app.bindLocationsVM)},void 0!==typeof ko&&(app.mvm&&app.bindMessagesVM(),app.lvm&&app.bindLocationsVM())}(),$(function(){"function"==typeof app.bindMessagesVM&&app.bindMessagesVM(),"function"==typeof app.bindLocationsVM&&app.bindLocationsVM();var a=app.map.initializeMap();new Date;a&&app.lvm.initGoogleMaps();var b=function(){$(".sidebar").removeClass("expand").animate({left:"-240px"},800),setTimeout(function(){$(".sidebar-hamburger").removeClass("expand")},550)},c=function(){$(".sidebar").addClass("expand").animate({left:"0px"},800),setTimeout(function(){$(".sidebar-hamburger").addClass("expand")},250)};$(".sidebar-button").click(function(){$(".sidebar-hamburger").hasClass("expand")?(b(),$("main").off("click",b)):(c(),$("main").on("click",b))})});var app=app||{};!function(){"use strict";var a=[{name:"Lands End",types:["Park","Point Of Interest","Establishment"],geometry:{location:{lat:37.7848836,lng:-122.50751}},formatted_address:"608 Point Lobos Ave, San Francisco, CA 94121, USA"},{name:"Golden Gate Vista Point",types:["Vista Point"],geometry:{location:{lat:37.8324413,lng:-122.479468}},formatted_address:"U.S. Highway 101, Sausalito, CA 94965, USA"},{name:"Lombard Street",types:["Point Of Interest","Establishment"],geometry:{location:{lat:37.802139,lng:-122.41874}},formatted_address:"Lombard St, San Francisco, CA 94133, USA"},{name:"Golden Gate Park",types:["Park","Point Of Interest","Establishment"],geometry:{location:{lat:37.7694208,lng:-122.4862138}},formatted_address:"JFK Drive and 25th Avenue, San Francisco, CA 94121, USA"},{name:"Union Square",types:["Neighborhood","Political"],geometry:{location:{lat:37.787994,lng:-122.407437}},formatted_address:"333 Post St, San Francisco, CA 94108, USA"}],b=JSON.parse(localStorage.getItem("locations-knockoutjs"));app.initialLocations=b||a}();var app=app||{},map;!function(){"use strict";var a,b,c=[],d=function(){var d=this;this.initializeMap=function(){var a=document.getElementById("pac-div");if("object"==typeof google&&"object"==typeof google.maps){var c={center:{lat:37.795,lng:-122.45},zoom:13,mapTypeId:"roadmap",zoomControl:!0,mapTypeControl:!1,streetViewControl:!1};map=new google.maps.Map(document.getElementById("map"),c);var e=document.getElementById("pac-input"),f=new google.maps.places.SearchBox(e);map.controls[google.maps.ControlPosition.TOP_LEFT].push(a),map.addListener("bounds_changed",function(){f.setBounds(map.getBounds())});var g=[];return f.addListener("places_changed",function(){var a=f.getPlaces();if(0!==a.length){g=d.clearPlaceMarkers(g);var c=new google.maps.LatLngBounds;a.forEach(function(a){if(!a.geometry)return void console.log("Returned place contains no geometry");var f={url:a.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)},h=new google.maps.Marker({map:map,icon:f,title:a.name,position:a.geometry.location}),i=document.createElement("button");i.textContent="Add to My Places",i.addEventListener("click",function(a){return function(){app.lvm.addLocation(a)}}(a));var j=document.createElement("div"),k=document.createElement("h4");k.textContent=a.name,j.appendChild(k),j.appendChild(i);var l=new google.maps.InfoWindow({content:j,maxWidth:150});google.maps.event.addListener(h,"click",function(a){"object"==typeof b&&b.close(),l.open(map,h),b=l}),g.push(h),a.geometry.viewport?c.union(a.geometry.viewport):c.extend(a.geometry.location),$("#clear-pac").click(function(){d.clearPlaceMarkers(g),e.textContent="",e.value=""})}),map.fitBounds(c)}}),window.addEventListener("resize",function(a){map.fitBounds(mapBounds)}),!0}return a.remove(),app.mvm.addMessage("GoogleMaps","Google Maps not loaded","alert-danger"),!1},this.clearPlaceMarkers=function(a){return a.forEach(function(a){a.setMap(null)}),a=[]},this.setMapBounds=function(a){window.mapBounds||(window.mapBounds=new google.maps.LatLngBounds);var b=window.mapBounds;b.extend(a),map.fitBounds(b),map.setCenter(b.getCenter())},this.setMapBoundsVisibleMarkers=function(){for(var a=new google.maps.LatLngBounds,b=0,d=0;d<c.length;d++)c[d].getVisible()&&(b+=1,a.extend(c[d].getPosition()));1===b?map.setCenter(a.getCenter()):b>=2&&(map.fitBounds(a),map.setCenter(a.getCenter()),window.mapBounds=a)},this.createMapMarker=function(b){var e=b.lat,f=b.lng,g=b.name,h=new google.maps.Marker({map:map,position:{lat:e,lng:f},title:g});h.locationId=b.id;var i=new google.maps.InfoWindow({content:g,maxWidth:150,disableAutoPan:!0});document.getElementById("info-window");return h.showTitleWindow=function(){i.open(map,h)},h.hideTitleWindow=function(){i.close()},h.bounce=function(){h.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){h.setAnimation(null)},700)},h.selectLocation=function(){"object"==typeof a&&a.setIcon(void 0),h.setIcon("http://maps.google.com/mapfiles/ms/icons/blue-dot.png"),h.bounce(),a=h},google.maps.event.addListener(h,"mouseover",function(){h.showTitleWindow()}),google.maps.event.addListener(h,"mouseout",function(){h.hideTitleWindow()}),google.maps.event.addListener(h,"click",function(a){app.lvm.selectLocationById(this.locationId)}),d.setMapBounds(new google.maps.LatLng(e,f)),c.push(h),h},this.setAllMarkersVisible=function(){for(var a=0;a<c.length;a++)c[a].setVisible(!0)},this.setMarkerMap=function(a,b){a.setMap(b)},this.setAllMarkersMap=function(a){for(var b=0;b<c.length;b++)c[b].setMap(a)}};app.map=new d}();var Type=function(a){this.name=ko.observable(a.name),this.text=ko.observable(a.text),this.elem=ko.computed(function(){return"filter_"+this.name()},this)},Place=function(a){this.id=a.id,this.name=ko.observable(a.name),this.location=ko.observable(a.geometry.location),this.formatted_address=ko.observable(a.formatted_address);var b=!1;if(a.formatted_address){var c=a.formatted_address.split(",");3===c.length&&c.unshift(""),4===c.length&&(b=!0,this.street=ko.observable(c[0].trim()),this.city=ko.observable(c[1].trim()),this.state=ko.observable(c[2].trim()),this.country=ko.observable(c[3].trim()))}b||(this.street=ko.observable(""),this.city=ko.observable(""),this.state=ko.observable(""),this.country=ko.observable("")),this.price_level=ko.observable(a.price_level),this.rating=ko.observable(a.rating),this.types=ko.observableArray(a.types),this.getTypes=ko.computed(function(){return this.types().join(", ")},this),this.currentApiObject=ko.observable(),this.apiObjects=ko.observable({}),this.getApiObjects=ko.computed(function(){var a=this.apiObjects(),b=[];for(var c in a)b.push(a[c]);return b},this),this.apiRequestStatus={},this.apiSearchStatus={},this.queryObject=function(a){var b=this.name();a&&!this.apiSearchStatus[a]&&(b+=" "+this.city());var c={api:a,locationId:this.id,location:this.location(),name:this.name(),city:this.city(),query:b};return c},this.toLocalStorage=function(){return{name:this.name(),types:this.types(),geometry:{location:this.location()},formatted_address:this.formatted_address()}}},Message=function(a){this.component=ko.observable(a.component),this.text=ko.observable(a.text),this.kind=ko.observable(a.kind)},Wikipedia=function(a){this.locationId=a.locationId,this.description=ko.observable("Loading description"),this.isDetailLoaded=ko.observable(!1),this.isImagesLoaded=ko.observable(!1),this.images=ko.observableArray([]),this.imagesAlt=ko.observable("Loading image list"),this.pageId=a.pageId,this.pageURL=ko.observable(a.pageURL),this.currentImage=ko.observable(new ApiObjectImage),this.api=ko.observable("Wikipedia"),this.text=ko.observable(a.text),this.title=a.title,this.newImage=function(a){return new WikipediaImage(a)},this.queryDetail=function(){return{query:this.title,locationId:this.locationId,api:this.api()}},this.queryImages=function(){return{query:this.pageId,locationId:this.locationId,api:this.api()}}},Foursquare=function(a){this.locationId=a.locationId,this.description=ko.observable("Loading description"),this.isDetailLoaded=ko.observable(!1),this.isImagesLoaded=ko.observable(!1),this.images=ko.observableArray([]),this.imagesAlt=ko.observable("Loading image list"),this.pageId=a.pageId,this.pageURL=ko.observable(a.pageURL),this.currentImage=ko.observable(new ApiObjectImage),this.api=ko.observable("Foursquare"),this.rating=ko.observable(a.rating),this.shortURL=ko.observable(a.shortURL),this.text=ko.observable(a.text),this.newImage=function(a){return new FoursquareImage(a)},this.queryDetail=function(){return{query:this.pageId,locationId:this.locationId,api:this.api()}}},ApiObjectImage=function(a){this.url=ko.observable(""),this.descriptionurl=ko.observable(""),this.user=ko.observable(""),this.localDateString=ko.observable("")},WikipediaImage=function(a){this.dataurl=ko.observable(a.url),this.url=ko.observable(a.thumburl),this.thumburl=ko.observable(a.thumburl),this.descriptionurl=ko.observable(a.descriptionurl),this.user=ko.observable(a.user);var b=new Date(a.timestamp);this.localDateString=ko.observable(b.toLocaleString())},FoursquareImage=function(a){this.id=ko.observable(a.id),this.height=ko.observable(a.height),this.prefix=ko.observable(a.prefix),this.suffix=ko.observable(a.suffix);var b=a.user.firstName;a.user.lastName&&a.user.lastName.length>0&&(b+=" "+a.user.lastName[0]+"."),this.user=ko.observable(b),this.width=ko.observable(a.width);var c=new Date(0);c.setUTCSeconds(a.createdAt),this.localDateString=ko.observable(c.toLocaleString()),this.descriptionurl=ko.observable(a.descriptionurl),this.url=ko.computed(function(){return this.prefix()+this.height()+"x"+this.width()+this.suffix()},this)},app=app||{};!function(){"use strict";var a=function(a){var b=a.split("_"),c=[];return b.forEach(function(a){c.push(a[0].toUpperCase()+a.slice(1))}),c.join(" ")},b=function(){var b=this;this.isGoogleMapsLoaded=!1,this.centerOn=ko.observableArray([]),this.centerOnList=ko.observableArray(["select","filter"]),this.searchText=ko.observable(""),this.locationIndex=0,this.fullLocationList=ko.observableArray([]),this.locationList=ko.observableArray([]),this.typeList=ko.observableArray([]),this.selectedTypes=ko.observableArray([]),this.types=[],this.editMode=ko.observable(!1),this.filterMode=ko.observable(!1),this.apiMode=ko.observable(!1),this.optionsMode=ko.observable(!1),this.locations={},this.apiList=["Wikipedia","Foursquare"],this.newApiObject={},this.newApiObject.Wikipedia=Wikipedia,this.newApiObject.Foursquare=Foursquare,this.initGoogleMaps=function(){this.isGoogleMapsLoaded=!0,b.createLocationMarker(b.fullLocationList())},this.createLocationMarker=function(a){return!!b.isGoogleMapsLoaded&&(Array.isArray(a)||(a=[a]),void a.forEach(function(a){var b={id:a.id,lat:a.location().lat,lng:a.location().lng,name:a.name()};a.marker=app.map.createMapMarker(b)}))},this.filterList=function(){var a=b.searchText().trim().toLowerCase(),c=!1,d=!1;if(a.length>0&&(c=!0),b.selectedTypes().length>0&&b.selectedTypes().length<b.typeList().length&&(d=!0),c||d){b.locationList.removeAll();var e=b.fullLocationList();e.forEach(function(e){var f=!0,g=0;if(c){var h=a.split(" "),i=e.name().toLowerCase();for(g=0;g<h.length;g++){var j=h[g].trim();if(j.length>0&&i.indexOf(j)<0){f=!1;break}}}if(f&&d){var k=e.types(),l=b.selectedTypes(),m=!1;for(g=0;g<l.length;g++)k.indexOf(l[g])>=0&&(m=!0);f=m}f?(b.locationList.push(e),e.marker.setVisible(!0)):e.marker.setVisible(!1)})}else b.locationList(b.fullLocationList.slice(0)),app.map.setAllMarkersVisible();b.centerOn.indexOf("filter")>=0&&app.map.setMapBoundsVisibleMarkers()},this.addTypeFromText=function(a){Array.isArray(a)||(a=[a]),a.forEach(function(a){var c=a.trim().toLowerCase().replace(/\s/g,"_");if(b.types.indexOf(c)<0){b.types.push(c);var d={name:c,text:a};b.typeList.push(new Type(d))}})},this.addTypeFromName=function(a){Array.isArray(a)||(a=[typesNames]),a.forEach(function(a){if(b.types.indexOf(a)<0){b.types.push(a);var c=a.split("_"),d=[];c.forEach(function(a){d.push(a[0].toUpperCase()+a.slice(1))});var e=d.join(" "),f={name:a,text:e};b.typeList.push(new Type(f))}})},this.insertLocation=function(a){a.id=b.locationIndex,b.locationIndex+=1,b.fullLocationList.push(a),b.locations[a.id]=a},app.initialLocations.forEach(function(a){b.insertLocation(new Place(a)),b.addTypeFromText(a.types)}),b.locationList(b.fullLocationList.slice(0)),b.currentLocation=ko.observable(),this.save=function(){var a=[];b.fullLocationList().forEach(function(b){a.push(b.toLocalStorage())}),localStorage.setItem("locations-knockoutjs",JSON.stringify(a))},this.getLocation=function(a){var c=b.locations[a];return c?c:void console.log("Location not found with id:"+a)},this.getApiObject=function(a,c){var d=b.locations[c].apiObjects()[a]();return d?d:void console.log((a?a:"ApiObject")+" not found")},this.addLocation=function(c){var d=new Place(c);d.location({lat:d.location().lat(),lng:d.location().lng()});var e=d.types(),f=[];e.forEach(function(b){var c=a(b);f.push(c)}),d.types(f),b.insertLocation(d),b.createLocationMarker(d),b.addTypeFromName(e),b.save(),b.filterList()},this.removeLocation=function(a){b.currentLocation()===a&&b.emptyCurrentLocation(),b.locations[a.id]=void 0,b.fullLocationList.remove(a),app.map.setMarkerMap(a.marker,null),a.marker=void 0,a=void 0,b.save(),b.filterList()},this.selectLocation=function(a){b.currentLocation(a),b.isGoogleMapsLoaded&&(a.marker.selectLocation(),b.centerOn.indexOf("select")>=0&&map.setCenter(a.marker.getPosition())),b.apiRequestAll(a)},this.selectLocationById=function(a){var c=b.getLocation(a);c?b.selectLocation(c):b.emptyCurrentLocation()},this.emptyCurrentLocation=function(){b.currentLocation(void 0)},this.showMarkerTitle=function(a){a.marker.showTitleWindow()},this.hideMarkerTitle=function(a){a.marker.hideTitleWindow()},this.search=function(){return b.filterList(),!0},this.toggleEditMode=function(){b.editMode(!b.editMode())},this.toggleFilterMode=function(){b.filterMode(!b.filterMode())},this.openApiMode=function(a){var c=a.locationId,d=b.getLocation(c),e=a.api();if(d){if(!e)return void console.log("Api not found");a.isDetailLoaded()?a.isImagesLoaded()||b.apiRequestImages(a.queryImages()):b.apiRequestDetail(a.queryDetail()),d.currentApiObject(a),b.apiMode(!0)}},this.closeApiMode=function(){b.apiMode(!1)},this.changeImage=function(a,b){var c=a.images.indexOf(a.currentImage()),d=a.images(),e=d.length;c+=e,c=b.delegateTarget.classList.contains("pre-image")?(c-1)%e:(c+1)%e,a.currentImage(d[c])},this.toggleOptionsMode=function(){b.optionsMode(!b.optionsMode())},this.clickCheckbox=function(a,b){$(b.target).siblings("input").click()},b.apiRequestAll=function(a){for(var c=b.apiList.length,d=0;d<c;d++)b.apiRequest(b.apiList[d],a)},b.apiRequest=function(a,b){if(void 0===b.apiRequestStatus[a]||0===b.apiRequestStatus[a]){b.apiRequestStatus[a]=1,app.mvm.addMessage(a,"Connecting to "+a,"alert-info",8e3);var c=b.queryObject(a);app.api.apiRequest("search",c)}else 1===b.apiRequestStatus[a]&&mvm.addMessage(a,"Call "+a+" for "+b.name()+" on process","alert-warning",2e3)},b.apiResponseData=function(a){var c=a.api,d=b.getLocation(a.locationId);if(d){var e=ko.observable(new b.newApiObject[c](a)),f=d.apiObjects();f[c]=e,d.apiObjects(f),d.apiRequestStatus[c]=2}},this.apiResponseFail=function(a){var c=a.api,d=b.getLocation(a.locationId);d&&(d.apiRequestStatus[c]=0,app.mvm.addMessage(c,"Couldn't connect to "+c+" for now!","alert-danger",8e3))},this.apiResponseNoInfo=function(a){var c=a.api,d=b.getLocation(a.locationId);d&&(d.apiSearchStatus[c]&&0!==d.apiSearchStatus[c]?1===d.apiSearchStatus[c]&&(d.apiRequestStatus[c]=3):(d.apiSearchStatus[c]=1,d.apiRequestStatus[c]=0,b.apiRequest(c,d)),app.mvm.addMessage(c,"No "+c+" Information for "+a.query,"alert-warning",8e3))},this.apiRequestDetail=function(a){app.api.apiRequest("query",a)},this.apiRequestImages=function(a){app.api.apiRequest("images",a)},this.apiResponseDetail=function(a){var c=b.getApiObject(a.api,a.locationId);if(c){for(var d in a)"function"==typeof c[d]?c[d](a[d]):c[d]=a[d];c.isDetailLoaded(!0)}},this.apiResponseImages=function(a){var c=b.getApiObject(a.api,a.locationId);c&&(a.images.length>0?(a.images.forEach(function(a){c.images.push(c.newImage(a))}),c.currentImage(c.images()[0])):c.imagesAlt("No images found on "+a.api),c.isImagesLoaded(!0))},this.apiResponseDetailFail=function(a){var c=b.getApiObject(apiData.api,apiData.locationId);c&&c.description("Description can not be loaded this time.")},this.apiResponseImagesFail=function(a){var c=b.getApiObject(apiData.api,apiData.locationId);c&&c.imagesAlt("Image list can not be loaded this time.")}};app.lvm=new b,"function"==typeof app.bindLocationsVM&&app.bindLocationsVM()}();var app=app||{};!function(){"use strict";var a=function(){var a=this;a.messageList=ko.observableArray([]),this.addMessage=function(b,c,d,e){var f=new Message({component:b,text:c,kind:d});if(a.messageList.unshift(f),e&&e>0&&setTimeout(function(){a.messageList.remove(f)},e),"Wikipedia"===b)if(this.wikipediaMessage){var g=this.wikipediaMessage();a.messageList.remove(g),a.wikipediaMessage(f)}else this.wikipediaMessage=ko.observable(f)},this.dismissMessage=function(b){a.messageList.remove(b)},this.dismissAllMessages=function(){a.messageList.removeAll()}};app.mvm=new a,"function"==typeof app.bindMessagesVM&&app.bindMessagesVM()}();
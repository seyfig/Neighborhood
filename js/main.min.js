/*! neighborhood - v0.1.0 - 2016-09-19 */var app=app||{};!function(){"use strict";var a=function(a){var b;for(var c in a){b=a[c];break}return b},b=function(){var b=this;b.apiList=["Wikipedia","Foursquare"],b.apis={},b.apiRequest=function(a,c){var d=c.api;b.apis[d].request[a]&&b.apis[d].request[a](c)},b.apiResponseData=function(a){app.lvm.apiResponseData(a)},b.apiResponseFail=function(a){app.lvm.apiResponseFail(a)},b.apiResponseNoInfo=function(a){app.lvm.apiResponseNoInfo(a)},b.apiResponseDetail=function(a){app.lvm.apiResponseDetail(a)},b.apiResponseImages=function(a){app.lvm.apiResponseImages(a)},b.apiResponseDetailFail=function(a){app.lvm.apiResponseDetailFail(a)},b.apiResponseImagesFail=function(a){app.lvm.apiResponseImagesFail(a)};var c=function(){var c=this;c.api="Wikipedia",c.request={},c.ajax=function(a,b,c){var d=setTimeout(c,8e3);$.ajax({type:"GET",url:a,dataType:"jsonp"}).done(function(a){clearTimeout(d),b(a)}).fail(c)},c.request.search=function(a){var d=encodeURIComponent(a.query).replace(/%20/g,"+"),e=a.locationId,f="https://en.wikipedia.org/w/api.php?action=opensearch&search="+d+"&format=json&callback=wikiCallback&redirects=resolve&prop=extracts&exintro=&explaintext=&rvprop=content",g=function(){b.apiResponseFail(a)},h=function(d){if(d[1][0]){var f={api:c.api,locationId:e,title:d[1][0],text:d[2][0],pageURL:d[3][0]};b.apiResponseData(f)}else b.apiResponseNoInfo(a)};c.ajax(f,h,g)},c.request.query=function(d){var e=d.locationId,f=encodeURIComponent(d.query).replace(/%20/g,"+"),g="https://en.wikipedia.org/w/api.php?format=json&action=query&redirects=resolve&prop=extracts&exintro=&explaintext=&titles="+f,h=function(){b.apiResponseDetailFail(d),b.apiResponseImagesFail(d)},i=function(f){var g=f.query.pages,h=a(g),i={api:c.api,locationId:e,description:h.extract,pageId:h.pageid};b.apiResponseDetail(i),d.query=h.pageid,c.request.images(d)};c.ajax(g,i,h)},c.request.images=function(a){var d=encodeURIComponent(a.query),e="https://en.wikipedia.org/w/api.php?action=query&pageids="+d+"&generator=images&prop=imageinfo&iiprop=url|dimensions|mime|user|timestamp&format=json&iiurlwidth=800",f=function(){b.apiResponseImagesFail(a)},g=function(d){var e=d.query.pages,f=[];for(var g in e){var h=e[g];if(!h.pageid){var i=h.imageinfo[0],j={url:i.url,thumburl:i.thumburl,descriptionurl:i.descriptionurl,user:i.user,timestamp:i.timestamp};f.push(j)}}var k={api:c.api,locationId:a.locationId,images:f};b.apiResponseImages(k)};c.ajax(e,g,f)}},d=function(a){var c=this;c.api="Foursquare",c.request={},c.ajax=function(a,b,c){var d="RKFO2JAPI2Q0TOWDDMZJ3C2R2G3PCPIZ0MAOBDNKECSKRNBD",e="EEUKXUDZQ23RTUARN3CRVFA4AXBSJTDNA3BU5UK0OXGNVIUW";a+="client_id="+d+"&client_secret="+e+"&v=20130815",$.ajax({type:"GET",url:a}).done(b).fail(c)},c.request.search=function(a){var d=a.location,e=encodeURIComponent(a.query),f=a.locationId,g=d.lat.toString()+","+d.lng.toString(),h="https://api.foursquare.com/v2/venues/search?ll="+g+"&limit=10&query="+e+"&",i=function(d){var e=d.response.venues;if(e.length>0){var g=d.response.venues[0],h={api:c.api,locationId:f,pageId:g.id,text:g.name};b.apiResponseData(h)}else b.apiResponseNoInfo(a)},j=function(){b.apiResponseFail(a)};c.ajax(h,i,j)},c.request.query=function(a){var d=encodeURIComponent(a.query),e="https://api.foursquare.com/v2/venues/"+d+"?",f=function(d){for(var e=d.response.venue,f=e.photos.groups[0].items,g=0;g<f.length;g++)f[g].descriptionurl=e.canonicalUrl+"?openPhotoId="+f[g].id;var h=e.description?e.description:e.name,i={api:c.api,locationId:a.locationId,pageURL:e.canonicalUrl,description:h,rating:e.rating,shortURL:e.shortUrl},j={api:c.api,locationId:a.locationId,images:f};b.apiResponseDetail(i),b.apiResponseImages(j)},g=function(){b.apiResponseDetailFail(a),b.apiResponseImagesFail(a)};c.ajax(e,f,g)}};b.apis.Wikipedia=new c,b.apis.Foursquare=new d};app.api=new b}();var app=app||{};!function(){"use strict";app.bindMessagesVM=function(){void 0!==typeof ko&&(ko.applyBindings(app.mvm,document.getElementById("messages")),delete app.bindMessagesVM)},app.bindLocationsVM=function(){void 0!==typeof ko&&(ko.applyBindings(app.lvm,document.getElementById("locations")),ko.applyBindings(app.lvm,document.getElementById("apiModal")),ko.applyBindings(app.lvm,document.getElementById("options")),delete app.bindLocationsVM)},void 0!==typeof ko&&(app.mvm&&app.bindMessagesVM(),app.lvm&&app.bindLocationsVM())}(),$(function(){"function"==typeof app.bindMessagesVM&&app.bindMessagesVM(),"function"==typeof app.bindLocationsVM&&app.bindLocationsVM();var a=function(){$(".sidebar").removeClass("expand").animate({left:"-240px"},800),setTimeout(function(){$(".sidebar-hamburger").removeClass("expand")},550)},b=function(){$(".sidebar").addClass("expand").animate({left:"0px"},800),setTimeout(function(){$(".sidebar-hamburger").addClass("expand")},250)};$(".sidebar-button").click(function(){$(".sidebar-hamburger").hasClass("expand")?(a(),$("main").off("click",a)):(b(),$("main").on("click",a))})});var app=app||{};!function(){"use strict";var a=[{name:"Lands End",types:["Park","Point Of Interest","Establishment"],geometry:{location:{lat:37.7848836,lng:-122.50751}},formatted_address:"608 Point Lobos Ave, San Francisco, CA 94121, USA"},{name:"Golden Gate Vista Point",types:["Vista Point"],geometry:{location:{lat:37.8324413,lng:-122.479468}},formatted_address:"U.S. Highway 101, Sausalito, CA 94965, USA"},{name:"Lombard Street",types:["Point Of Interest","Establishment"],geometry:{location:{lat:37.802139,lng:-122.41874}},formatted_address:"Lombard St, San Francisco, CA 94133, USA"},{name:"Golden Gate Park",types:["Park","Point Of Interest","Establishment"],geometry:{location:{lat:37.7694208,lng:-122.4862138}},formatted_address:"JFK Drive and 25th Avenue, San Francisco, CA 94121, USA"},{name:"Union Square",types:["Neighborhood","Political"],geometry:{location:{lat:37.787994,lng:-122.407437}},formatted_address:"333 Post St, San Francisco, CA 94108, USA"}],b=JSON.parse(localStorage.getItem("locations-knockoutjs"));app.initialLocations=b||a}();var app=app||{},map;!function(){"use strict";var a,b=[],c=function(){var c=this;c.pacDiv=document.getElementById("pac-div"),c.initializeGoogleSearch=function(){var b=document.getElementById("pac-input"),d=new google.maps.places.SearchBox(b);map.controls[google.maps.ControlPosition.TOP_LEFT].push(c.pacDiv),map.addListener("bounds_changed",function(){d.setBounds(map.getBounds())});var e=[];d.addListener("places_changed",function(){var f=d.getPlaces();if(0!==f.length){e=c.clearPlaceMarkers(e);var g=new google.maps.LatLngBounds;f.forEach(function(d){if(d.geometry){var f={url:d.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)},h=new google.maps.Marker({map:map,icon:f,title:d.name,position:d.geometry.location}),i=document.createElement("button");i.textContent="Add to My Places",i.addEventListener("click",function(a){return function(){app.lvm.addLocation(a)}}(d));var j=document.createElement("div"),k=document.createElement("h4");k.textContent=d.name,j.appendChild(k),j.appendChild(i);var l=new google.maps.InfoWindow({content:j,maxWidth:150});google.maps.event.addListener(h,"click",function(b){"object"==typeof a&&a.close(),l.open(map,h),a=l}),e.push(h),d.geometry.viewport?g.union(d.geometry.viewport):g.extend(d.geometry.location),$("#clear-pac").click(function(){c.clearPlaceMarkers(e),b.textContent="",b.value=""})}}),map.fitBounds(g)}})},c.initializeMap=function(){if("object"==typeof google&&"object"==typeof google.maps){var a={center:{lat:37.795,lng:-122.45},zoom:13,mapTypeId:"roadmap",zoomControl:!0,mapTypeControl:!1,streetViewControl:!1};return map=new google.maps.Map(document.getElementById("map"),a),c.initializeGoogleSearch(),window.addEventListener("resize",function(a){map.fitBounds(mapBounds)}),app.lvm.initGoogleMaps(),!0}return c.googleError(),!1},c.googleError=function(){c.pacDiv.remove(),delete c.pacDiv,app.mvm.addMessage("GoogleMaps","Google Maps not loaded","alert-danger")},c.clearPlaceMarkers=function(a){return a.forEach(function(a){a.setMap(null)}),a=[]},c.setMapBounds=function(a){window.mapBounds||(window.mapBounds=new google.maps.LatLngBounds);var b=window.mapBounds;b.extend(a),map.fitBounds(b),map.setCenter(b.getCenter())},c.setMapBoundsVisibleMarkers=function(){for(var a=new google.maps.LatLngBounds,c=0,d=0;d<b.length;d++)b[d].getVisible()&&(c+=1,a.extend(b[d].getPosition()));1===c?map.setCenter(a.getCenter()):c>=2&&(map.fitBounds(a),map.setCenter(a.getCenter()),window.mapBounds=a)},c.createMapMarker=function(a){var d=a.lat,e=a.lng,f=a.name,g=new google.maps.Marker({map:map,position:{lat:d,lng:e},title:f});g.locationId=a.id;var h=new google.maps.InfoWindow({content:f,maxWidth:150,disableAutoPan:!0});document.getElementById("info-window");return g.showTitleWindow=function(){h.open(map,g)},g.hideTitleWindow=function(){h.close()},google.maps.event.addListener(g,"mouseover",function(){g.showTitleWindow()}),google.maps.event.addListener(g,"mouseout",function(){g.hideTitleWindow()}),c.setMapBounds(new google.maps.LatLng(d,e)),b.push(g),g},c.setAllMarkersVisible=function(){for(var a=0;a<b.length;a++)b[a].setVisible(!0)},c.setMarkerMap=function(a,b){a.setMap(b)},c.setAllMarkersMap=function(a){for(var c=0;c<b.length;c++)b[c].setMap(a)}};app.map=new c}();var initMap=function(){app.map.initializeMap()},googleError=function(){app.map.googleError()},Type=function(a){this.name=ko.observable(a.name),this.text=ko.observable(a.text),this.elem=ko.computed(function(){return"filter_"+this.name()},this)},Place=function(a){this.id=a.id,this.name=ko.observable(a.name),this.location=ko.observable(a.geometry.location),this.formatted_address=ko.observable(a.formatted_address);var b=!1;if(a.formatted_address){var c=a.formatted_address.split(",");3===c.length&&c.unshift(""),4===c.length&&(b=!0,this.street=ko.observable(c[0].trim()),this.city=ko.observable(c[1].trim()),this.state=ko.observable(c[2].trim()),this.country=ko.observable(c[3].trim()))}b||(this.street=ko.observable(""),this.city=ko.observable(""),this.state=ko.observable(""),this.country=ko.observable("")),this.price_level=ko.observable(a.price_level),this.rating=ko.observable(a.rating),this.types=ko.observableArray(a.types),this.getTypes=ko.computed(function(){return this.types().join(", ")},this),this.currentApiObject=ko.observable(),this.apiObjects=ko.observable({}),this.getApiObjects=ko.computed(function(){var a=this.apiObjects(),b=[];for(var c in a)b.push(a[c]);return b},this),this.apiRequestStatus={},this.apiSearchStatus={}};Place.prototype.queryObject=function(a){var b=this.name();a&&!this.apiSearchStatus[a]&&(b+=" "+this.city());var c={api:a,locationId:this.id,location:this.location(),name:this.name(),city:this.city(),query:b};return c},Place.prototype.toLocalStorage=function(){return{name:this.name(),types:this.types(),geometry:{location:this.location()},formatted_address:this.formatted_address()}},Place.prototype.selectMarker=function(){var a=this.marker;"undefined"!=typeof a&&(a.setIcon("https://maps.google.com/mapfiles/ms/icons/blue-dot.png"),a.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){a.setAnimation(null)},700))},Place.prototype.deselectMarker=function(){var a=this.marker;"undefined"!=typeof a&&a.setIcon(void 0)};var Message=function(a){this.component=ko.observable(a.component),this.text=ko.observable(a.text),this.kind=ko.observable(a.kind)},ApiObject=function(a){this.locationId=a.locationId,this.description=ko.observable("Loading description"),this.isDetailLoaded=ko.observable(!1),this.isImagesLoaded=ko.observable(!1),this.images=ko.observableArray([]),this.imagesAlt=ko.observable("Loading image list"),this.pageId=a.pageId,this.pageURL=ko.observable(a.pageURL),this.currentImage=ko.observable(new ApiObjectImage),this.text=ko.observable(a.text)},Wikipedia=function(a){ApiObject.call(this,a),this.api=ko.observable("Wikipedia"),this.title=a.title};Wikipedia.prototype=Object.create(ApiObject.prototype),Wikipedia.prototype.constructor=Wikipedia,Wikipedia.prototype.newImage=function(a){return new WikipediaImage(a)},Wikipedia.prototype.queryDetail=function(){return{query:this.title,locationId:this.locationId,api:this.api()}},Wikipedia.prototype.queryImages=function(){return{query:this.pageId,locationId:this.locationId,api:this.api()}};var Foursquare=function(a){ApiObject.call(this,a),this.api=ko.observable("Foursquare"),this.rating=ko.observable(a.rating),this.shortURL=ko.observable(a.shortURL)};Foursquare.prototype=Object.create(ApiObject.prototype),Foursquare.prototype.constructor=Foursquare,Foursquare.prototype.newImage=function(a){return new FoursquareImage(a)},Foursquare.prototype.queryDetail=function(){return{query:this.pageId,locationId:this.locationId,api:this.api()}};var ApiObjectImage=function(a){this.url=ko.observable(""),this.descriptionurl=ko.observable(""),this.user=ko.observable(""),this.localDateString=ko.observable("")},WikipediaImage=function(a){this.dataurl=ko.observable(a.url),this.url=ko.observable(a.thumburl),this.thumburl=ko.observable(a.thumburl),this.descriptionurl=ko.observable(a.descriptionurl),this.user=ko.observable(a.user);var b=new Date(a.timestamp);this.localDateString=ko.observable(b.toLocaleString())},FoursquareImage=function(a){this.id=ko.observable(a.id),this.height=ko.observable(a.height),this.width=ko.observable(a.width),this.prefix=ko.observable(a.prefix),this.suffix=ko.observable(a.suffix),this.url=ko.computed(function(){return this.prefix()+this.height()+"x"+this.width()+this.suffix()},this),this.descriptionurl=ko.observable(a.descriptionurl);var b=a.user.firstName;a.user.lastName&&a.user.lastName.length>0&&(b+=" "+a.user.lastName[0]+"."),this.user=ko.observable(b);var c=new Date(0);c.setUTCSeconds(a.createdAt),this.localDateString=ko.observable(c.toLocaleString())},app=app||{};!function(){"use strict";var a=function(a){var b=a.split("_"),c=[];return b.forEach(function(a){c.push(a[0].toUpperCase()+a.slice(1))}),c.join(" ")},b=function(){var b=this;b.isGoogleMapsLoaded=!1,b.centerOn=ko.observableArray([]),b.centerOnList=ko.observableArray(["select","filter"]),b.searchText=ko.observable(""),b.locationIndex=0,b.fullLocationList=ko.observableArray([]),b.locationList=ko.observableArray([]),b.typeList=ko.observableArray([]),b.selectedTypes=ko.observableArray([]),b.types=[],b.editMode=ko.observable(!1),b.filterMode=ko.observable(!1),b.apiMode=ko.observable(!1),b.optionsMode=ko.observable(!1),b.locations={},b.apiList=["Wikipedia","Foursquare"],b.newApiObject={},b.newApiObject.Wikipedia=Wikipedia,b.newApiObject.Foursquare=Foursquare,b.initGoogleMaps=function(){b.isGoogleMapsLoaded=!0,b.createLocationMarker(b.fullLocationList())},b.createLocationMarker=function(a){return!!b.isGoogleMapsLoaded&&(Array.isArray(a)||(a=[a]),void a.forEach(function(a){var c={id:a.id,lat:a.location().lat,lng:a.location().lng,name:a.name()};a.marker=app.map.createMapMarker(c),google.maps.event.addListener(a.marker,"click",function(c){b.selectLocation(a)})}))},b.filterList=function(){var a=b.searchText().trim().toLowerCase(),c=!1,d=!1;if(a.length>0&&(c=!0),b.selectedTypes().length>0&&b.selectedTypes().length<b.typeList().length&&(d=!0),c||d){b.locationList.removeAll();var e=b.fullLocationList();e.forEach(function(e){var f=!0,g=0;if(c){var h=a.split(" "),i=e.name().toLowerCase();for(g=0;g<h.length;g++){var j=h[g].trim();if(j.length>0&&i.indexOf(j)<0){f=!1;break}}}if(f&&d){var k=e.types(),l=b.selectedTypes(),m=!1;for(g=0;g<l.length;g++)k.indexOf(l[g])>=0&&(m=!0);f=m}f?(b.locationList.push(e),e.marker.setVisible(!0)):e.marker.setVisible(!1)})}else b.locationList(b.fullLocationList.slice(0)),app.map.setAllMarkersVisible();b.centerOn.indexOf("filter")>=0&&app.map.setMapBoundsVisibleMarkers()},b.addTypeFromText=function(a){Array.isArray(a)||(a=[a]),a.forEach(function(a){var c=a.trim().toLowerCase().replace(/\s/g,"_");if(b.types.indexOf(c)<0){b.types.push(c);var d={name:c,text:a};b.typeList.push(new Type(d))}})},b.addTypeFromName=function(a){Array.isArray(a)||(a=[typesNames]),a.forEach(function(a){if(b.types.indexOf(a)<0){b.types.push(a);var c=a.split("_"),d=[];c.forEach(function(a){d.push(a[0].toUpperCase()+a.slice(1))});var e=d.join(" "),f={name:a,text:e};b.typeList.push(new Type(f))}})},b.insertLocation=function(a){a.id=b.locationIndex,b.locationIndex+=1,b.fullLocationList.push(a),b.locations[a.id]=a},app.initialLocations.forEach(function(a){b.insertLocation(new Place(a)),b.addTypeFromText(a.types)}),b.locationList(b.fullLocationList.slice(0)),b.currentLocation=ko.observable(),b.save=function(){var a=[];b.fullLocationList().forEach(function(b){a.push(b.toLocalStorage())}),localStorage.setItem("locations-knockoutjs",JSON.stringify(a))},b.getLocation=function(a){var c=b.locations[a];return c?c:void 0},b.getApiObject=function(a,c){var d=b.locations[c].apiObjects()[a]();return d?d:void 0},b.addLocation=function(c){var d=new Place(c);d.location({lat:d.location().lat(),lng:d.location().lng()});var e=d.types(),f=[];e.forEach(function(b){var c=a(b);f.push(c)}),d.types(f),b.insertLocation(d),b.createLocationMarker(d),b.addTypeFromName(e),b.save(),b.filterList()},b.removeLocation=function(a){b.currentLocation()===a&&b.emptyCurrentLocation(),b.locations[a.id]=void 0,b.fullLocationList.remove(a),app.map.setMarkerMap(a.marker,null),a.marker=void 0,a=void 0,b.save(),b.filterList()},b.selectLocation=function(a){var c=b.currentLocation();"object"==typeof c&&c.deselectMarker(),b.currentLocation(a),b.isGoogleMapsLoaded&&(a.selectMarker(),b.centerOn.indexOf("select")>=0&&map.setCenter(a.marker.getPosition())),b.apiRequestAll(a)},b.emptyCurrentLocation=function(){b.currentLocation(void 0)},b.showMarkerTitle=function(a){a.marker.showTitleWindow()},b.hideMarkerTitle=function(a){a.marker.hideTitleWindow()},b.search=function(){return b.filterList(),!0},b.toggleEditMode=function(){b.editMode(!b.editMode())},b.toggleFilterMode=function(){b.filterMode(!b.filterMode())},b.openApiMode=function(a){var c=a.locationId,d=b.getLocation(c),e=a.api();d&&e&&(a.isDetailLoaded()?a.isImagesLoaded()||b.apiRequestImages(a.queryImages()):b.apiRequestDetail(a.queryDetail()),d.currentApiObject(a),b.apiMode(!0))},b.closeApiMode=function(){b.apiMode(!1)},b.changeImage=function(a,b){var c=a.images.indexOf(a.currentImage()),d=a.images(),e=d.length;c+=e,c=b.delegateTarget.classList.contains("pre-image")?(c-1)%e:(c+1)%e,a.currentImage(d[c])},b.toggleOptionsMode=function(){b.optionsMode(!b.optionsMode())},b.clickCheckbox=function(a,b){$(b.target).siblings("input").click()},b.apiRequestAll=function(a){for(var c=b.apiList.length,d=0;d<c;d++)b.apiRequest(b.apiList[d],a)},b.apiRequest=function(a,b){if(void 0===b.apiRequestStatus[a]||0===b.apiRequestStatus[a]){b.apiRequestStatus[a]=1,app.mvm.addMessage(a,"Connecting to "+a,"alert-info",8e3);var c=b.queryObject(a);app.api.apiRequest("search",c)}else 1===b.apiRequestStatus[a]&&mvm.addMessage(a,"Call "+a+" for "+b.name()+" on process","alert-warning",2e3)},b.apiResponseData=function(a){var c=a.api,d=b.getLocation(a.locationId);if(d){var e=ko.observable(new b.newApiObject[c](a)),f=d.apiObjects();f[c]=e,d.apiObjects(f),d.apiRequestStatus[c]=2}},b.apiResponseFail=function(a){var c=a.api,d=b.getLocation(a.locationId);d&&(d.apiRequestStatus[c]=0,app.mvm.addMessage(c,"Couldn't connect to "+c+" for now!","alert-danger",8e3))},b.apiResponseNoInfo=function(a){var c=a.api,d=b.getLocation(a.locationId);d&&(d.apiSearchStatus[c]&&0!==d.apiSearchStatus[c]?1===d.apiSearchStatus[c]&&(d.apiRequestStatus[c]=3):(d.apiSearchStatus[c]=1,d.apiRequestStatus[c]=0,b.apiRequest(c,d)),app.mvm.addMessage(c,"No "+c+" Information for "+a.query,"alert-warning",8e3))},b.apiRequestDetail=function(a){app.api.apiRequest("query",a)},b.apiRequestImages=function(a){app.api.apiRequest("images",a)},b.apiResponseDetail=function(a){var c=b.getApiObject(a.api,a.locationId);if(c){for(var d in a)"function"==typeof c[d]?c[d](a[d]):c[d]=a[d];c.isDetailLoaded(!0)}},b.apiResponseImages=function(a){var c=b.getApiObject(a.api,a.locationId);c&&(a.images.length>0?(a.images.forEach(function(a){c.images.push(c.newImage(a))}),c.currentImage(c.images()[0])):c.imagesAlt("No images found on "+a.api),c.isImagesLoaded(!0))},b.apiResponseDetailFail=function(a){var c=b.getApiObject(a.api,a.locationId);c&&c.description("Description can not be loaded this time.")},b.apiResponseImagesFail=function(a){var c=b.getApiObject(a.api,a.locationId);c&&c.imagesAlt("Image list can not be loaded this time.")}};app.lvm=new b,"function"==typeof app.bindLocationsVM&&app.bindLocationsVM()}();var app=app||{};!function(){"use strict";var a=function(){var a=this;a.messageList=ko.observableArray([]),a.addMessage=function(b,c,d,e){var f=new Message({component:b,text:c,kind:d});if(a.messageList.unshift(f),e&&e>0&&setTimeout(function(){a.messageList.remove(f)},e),"Wikipedia"===b)if(this.wikipediaMessage){var g=this.wikipediaMessage();a.messageList.remove(g),a.wikipediaMessage(f)}else this.wikipediaMessage=ko.observable(f)},a.dismissMessage=function(b){a.messageList.remove(b)},a.dismissAllMessages=function(){a.messageList.removeAll()}};app.mvm=new a,"function"==typeof app.bindMessagesVM&&app.bindMessagesVM()}();